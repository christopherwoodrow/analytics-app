!function(t){"object"==typeof module&&module.exports?module.exports=t:t(Highcharts)}(function(t){var e=t.getOptions(),n=e.plotOptions,i=t.seriesTypes,s=t.merge,a=function(){},o=t.each;n.funnel=s(n.pie,{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,dataLabels:{connectorWidth:1,connectorColor:"#606060"},size:!0,states:{select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}}}),i.funnel=t.extendClass(i.pie,{type:"funnel",animate:a,translate:function(){var t,e,n,i,s,r,l,p,h,c,d,u=function(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)},f=0,g=this.chart,y=this.options,b=y.reversed,m=y.ignoreHiddenPoint,v=g.plotWidth,g=g.plotHeight,C=0,L=y.center,k=u(L[0],v),w=u(L[1],g),H=u(y.width,v),W=u(y.height,g),A=u(y.neckWidth,v),Y=u(y.neckHeight,g),x=w-W/2+W-Y,u=this.data,O="left"===y.dataLabels.position?1:0;this.getWidthAt=e=function(t){var e=w-W/2;return t>x||W===Y?A:A+(H-A)*(1-(t-e)/(W-Y))},this.getX=function(t,n){return k+(n?-1:1)*(e(b?2*w-t:t)/2+y.dataLabels.distance)},this.center=[k,w,W],this.centerX=k,o(u,function(t){m&&t.visible===!1||(f+=t.y)}),o(u,function(o){d=null,i=f?o.y/f:0,r=w-W/2+C*W,h=r+i*W,t=e(r),s=k-t/2,l=s+t,t=e(h),p=k-t/2,c=p+t,r>x?(s=p=k-A/2,l=c=k+A/2):h>x&&(d=h,t=e(x),p=k-t/2,c=p+t,h=x),b&&(r=2*w-r,h=2*w-h,d=d?2*w-d:null),n=["M",s,r,"L",l,r,c,h],d&&n.push(c,d,p,d),n.push(p,h,"Z"),o.shapeType="path",o.shapeArgs={d:n},o.percentage=100*i,o.plotX=k,o.plotY=(r+(d||h))/2,o.tooltipPos=[k,o.plotY],o.slice=a,o.half=O,m&&o.visible===!1||(C+=i)})},drawPoints:function(){var t,e,n,i=this,s=i.chart.renderer;o(i.data,function(a){n=a.graphic,e=a.shapeArgs,t=a.pointAttr[a.selected?"select":""],n?n.attr(t).animate(e):a.graphic=s.path(e).attr(t).add(i.group)})},sortByAngle:function(t){t.sort(function(t,e){return t.plotY-e.plotY})},drawDataLabels:function(){var t,e,n,s,a,o=this.data,r=this.options.dataLabels.distance,l=o.length;for(this.center[2]-=2*r;l--;)n=o[l],e=(t=n.half)?1:-1,a=n.plotY,s=this.getX(a,t),n.labelPos=[0,a,s+(r-5)*e,a,s+r*e,a,t?"right":"left",0];i.pie.prototype.drawDataLabels.call(this)}}),e.plotOptions.pyramid=t.merge(e.plotOptions.funnel,{neckWidth:"0%",neckHeight:"0%",reversed:!0}),t.seriesTypes.pyramid=t.extendClass(t.seriesTypes.funnel,{type:"pyramid"})});