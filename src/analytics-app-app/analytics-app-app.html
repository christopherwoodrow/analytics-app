<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-slider/paper-slider.html">

<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/paper-styles/paper-styles.html">
<link rel="import" href="../../bower_components/vaadin-charts/vaadin-line-chart.html">




<dom-module id="analytics-app-app">
  <template>
    <style>
      :host {
        display: block;
        height: 500px;
        font-family: roboto;
      }

      paper-header-panel {
        height: 80px;
        padding: 12px;
        @apply(--shadow-elevation-2dp);
        background-color: #efeede;
      }
      .paper-header {
        height: 60px;
        font-size: 16px;
        line-height: 60px;
        padding: 0 10px;
        color: white;
        transition: height 0.2s;
      }
      .content {
        font-size: 14px;
        padding: 0 10px;
        transition: height 0.2s;
      }

      paper-card {
        display: flex;
        margin: 18px 0;
      }

      .year-select {
        padding: 18px;
      }

      paper-slider {
        width: 90%;
      }

    </style>

    <paper-header-panel mode="waterfall-tall" class="pink">
      <div class="paper-header"><img src="/assets/logo.png"></div>
      <div class="content">[[prop1]]</div>
    </paper-header-panel>



    <paper-card class="chart">

      <vaadin-line-chart>
      <chart-title>Risk Analysis</chart-title>
        <data-series name="Yeild">
          <data id="data-points">
            [[seriesData]]
          </data>
        </data-series>
      </vaadin-line-chart>

    </paper-card>

    <paper-card class="year-select">  
      <p>Timeline</p>
      <paper-slider id="years" pin snaps min="2012" max="2016" max-markers="4" step="1" value="{{year::change}}"></paper-slider>
      <p>{{year}}</p>
    </paper-card>
    
  </template>

  <script>
    Polymer({

      is: 'analytics-app-app',

      properties: {
        prop1: {
          type: String,
          value: 'Analytics Technology v0.0.1',
        },
        year: {
          type: Number,
          value: 2016,
          observer: "_yearChanged"
        },
        seriesData: {
          type: Array,
          value: [17,23,10,19,22,21,27,29]
        }
      },

      _yearChanged: function() {
        if (this.year == 2012){
          this.seriesData = [100,92,43,34,42,41];
        } else if (this.year == 2013) {
          this.seriesData = [41,20,33,34,22,21];
        } else if (this.year == 2014) {
          this.seriesData = [21,20,33,34,42,47];
        } else if (this.year == 2015) {
          this.seriesData = [47,49,56,66,42,67];
        } else if (this.year == 2016) {
          this.seriesData = [67,77,65,99,118,167];
        };
      }

    });

  </script>
</dom-module>
